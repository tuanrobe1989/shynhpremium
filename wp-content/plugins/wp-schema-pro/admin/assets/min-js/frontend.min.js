!function(r){const s={container:"",init(){const a=this;jQuery(document).on("click",".aiosrs-rating-wrap .aiosrs-star-rating",function(s){s.preventDefault(),a.star_rating(this)}),jQuery(document).on("mouseover",".aiosrs-rating-wrap .aiosrs-star-rating",function(s){s.preventDefault(),a.hover_star_rating(this)}),jQuery(document).on("mouseout",".aiosrs-rating-wrap .aiosrs-star-rating-wrap",function(s){s.preventDefault(),r(this).hasClass("disabled")||(s=r(this).parent().find(".aiosrs-rating").text(),a.update_stars(r(this),s))})},hover_star_rating(s){const a=r(s).closest(".aiosrs-star-rating-wrap"),t=r(s).data("index");a.hasClass("disabled")||this.update_stars(a,t)},update_stars(s,a){let t=5<a?5:parseInt(a);t=5<a?5:a<0?0:parseInt(a);const n=a===t||5<a||a<0?0:1;s.find("span").each(function(s){r(this).removeClass("dashicons-star-filled dashicons-star-half dashicons-star-empty"),s<t?r(this).addClass("dashicons-star-filled"):(s===t&&n,r(this).addClass("dashicons-star-empty"))})},star_rating(s){const i=this,a=r(s).closest(".aiosrs-rating-wrap").data("schema-id"),e=r(s).closest(".aiosrs-star-rating-wrap"),t=r(s).data("index");e.hasClass("disabled")||(i.update_stars(e,t),e.addClass("disabled"),r.ajax({url:AIOSRS_Frontend.ajaxurl,type:"POST",data:{action:"aiosrs_user_rating",rating:t,schemaId:a,post_id:AIOSRS_Frontend.post_id,nonce:AIOSRS_Frontend.user_rating_nonce}}).success(function(s){if(!0===s.success){const a=e.next(".aiosrs-rating-summary-wrap"),t=s.rating,n=s["rating-avg"],r=s["review-count"];a.find(".aiosrs-rating").text(n),a.find(".aiosrs-rating-count").text(r),0===e.next(".success-msg").length&&e.after('<span class="success-msg">'+AIOSRS_Frontend.success_msg+"</span>"),setTimeout(function(){e.parent().find(".success-msg").remove(),e.removeClass("disabled")},5e3),i.update_stars(e,t)}}))}};r(function(){s.init()})}(jQuery);